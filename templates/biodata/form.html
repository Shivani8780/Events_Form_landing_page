{% load widget_tweaks %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Free Biodata Online Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background-image: url('https://i0.wp.com/detechter.com/wp-content/uploads/2017/07/Hindu-Wedding-India.jpg?fit=886%2C535&ssl=1');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            padding: 20px;
        }
        .form-container {
            max-width: 700px;
            margin: auto;
            background: rgba(253, 242, 242, 0.95);
            padding: 40px 50px;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(0,0,0,0.15);
        }
        h1 {
            margin-bottom: 30px;
            text-align: center;
            color: #2c3e50;
            font-weight: 700;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            border-bottom: 2px solid #d6336c;
            padding-bottom: 8px;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }
        button {
            width: 100%;
            padding: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            background-color: #d6336c;
            border: none;
            border-radius: 8px;
            color: white;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #b52a58;
        }
        /* Custom smaller input size for hobbies and other habits */
        .small-input {
            max-height: 100px;
        }
        /* Custom color for section titles */
        .section-title {
            color: #d6336c; /* A rich pinkish-red color often associated with Indian weddings */
            font-weight: 700;
            font-size: 1.4rem;
            margin-bottom: 15px;
            border-bottom: 2px solid #d6336c;
            padding-bottom: 5px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        /* Increase input box border width */
        input.form-control, textarea.form-control, select.form-control, input.form-check-input {
            border-width: 1.5px !important;
            border-style: solid !important;
            border-color: #2c3e50 !important;
            border-radius: 6px;
            padding: 6px 8px;
            font-size: 0.9rem;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        /* Serial number style */
        .serial-number {
            font-weight: 400;
            margin-right: 5px;
            color: #333435;
        }
        /* Two column layout for form fields */
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            flex: 1 1 40%;
            min-width: 220px;
            margin-bottom: 15px;
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .form-container {
                padding: 30px 20px;
            }
            .form-row {
                flex-direction: column;
            }
            .form-group {
                flex: 1 1 100%;
            }
            button {
                font-size: 1rem;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Free Biodata Online Form</h1>
        <form method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}
            {% for field in form %}
                {% if field.name in personal_fields %}
                    <div class="form-row">
                        <div class="form-group">
                            {% if field.name == 'declaration' %}
                                <p style="white-space: pre-line; font-weight: 600; color: #d6336c; margin-bottom: 15px;">
                                    ભૂદેવ નેટવર્ક ના સિદ્ધાંતો અને નીતિ-નિયમો પ્રમાણે ,  (૧) હું અને મારો પરિવાર , સામે થી આવતા દરેક ભૂદેવ નો કોલ વિનમ્રતા અને શાંતિ થી લઈશું , તેમને અમારો હા / ના , જે પણ જવાબ હોય તે સરળતા , આદરતા-પૂર્વક અને નિહ-સંકોચ થી ફોન ઉપર બોલીને કે પછી વોટ્સએપ માં લખીને (અન્ય રીતે) જણાવીશું .  (૨) કોલ કરનાર સામે વાળા ભૂદેવ નું અમે અપમાન નહીં કરીયે અને જેમ-તેમ તે ભૂદેવ ને ઉતારી નહિ પાડીયે , તેમની સાથે વ્યવસ્થિત વર્તન કરીશું . (૩) આ સાથેજ , પ્રથમ કોલ  કે મેસ
The view biodata_form uses CandidateBiodataForm and handles form submission and rendering. It already saves the form instance and generates PDF and Excel records. No changes are needed here for the new declaration field as it is part of the form and model.

Summary:
- Model already has the declaration field with choices and Gujarati text.
- Form class already includes the declaration field with the full Gujarati declaration text as label.
- View already handles the form submission and saving.
- Template renders the declaration field but does not show the full declaration text separately.

Plan:
- Edit templates/biodata/form.html to add the full Gujarati declaration text as a paragraph or block above the declaration field input, so users can read it before selecting Agree or Disagree.
- No changes needed in model, form, or views.

I will now prepare the edit for templates/biodata/form.html to add the declaration text above the declaration field input.
</thinking>

<edit_file>
<path>templates/biodata/form.html</path>
<content>
<<<<<<< SEARCH
                {% if field.name in personal_fields %}
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ field.id_for_label }}" class="form-label" style="white-space: normal; word-wrap: break-word; display: inline-block; max-width: 100%; vertical-align: top; text-indent: -1.5em; padding-left: 1.5em;">
                                {% if field.name == 'father_name' %}
                                    Father's Name
                                {% elif field.name == 'father_mobile' %}
                                    Father's WhatsappNo
                                {% elif field.name == 'mother_name' %}
                                    Mother's Name
                                {% elif field.name == 'mother_mobile' %}
                                    Mother's WhatsappNo
                                {% elif field.name == 'siblings' %}
                                    Siblings Details (Brother/Sister)
                                {% elif field.name == 'partner_education' %}
                                    Choice Of Education
                                {% elif field.name == 'partner_location' %}
                                    Choice Of Location
                                {% elif field.name == 'partner_age_bracket' %}
                                    Choice Of Age Gap/ Difference in Year
                                {% elif field.name == 'other_specific_choice' %}
                                    Any Other Choice
                                {% else %}
                                    {{ field.label }}
                                {% endif %}
                            </label>
                            {% if field.field.widget.input_type == "select" %}
                                <select id="{{ field.id_for_label }}" name="{{ field.html_name }}" class="form-control" required>
                                    <option value="" disabled selected>Select an Option</option>
                                    {% for val, text in field.field.choices %}
                                        {% if val != "" %}
                                            <option value="{{ val }}" {% if field.value == val %}selected{% endif %}>{{ text }}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            {% elif field.field.widget.input_type == "checkbox" %}
                                {{ field|add_class:"form-check-input" }}
                            {% elif field.name == "other_specific_choice" or field.name == "education_details" or field.name == "occupation_details" %}
                                {{ field|add_class:"form-control small-input" }}
                            {% else %}
                                {{ field|add_class:"form-control" }}
                            {% endif %}
                            {% if field.help_text %}
                                <div class="form-text">{{ field.help_text }}</div>
                            {% endif %}
                            {% for error in field.errors %}
                                <div class="text-danger">{{ error }}</div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
=======
                {% if field.name in personal_fields %}
                    <div class="form-row">
                        <div class="form-group">
                            {% if field.name == 'declaration' %}
                                <p style="white-space: pre-line; font-weight: 600; color: #d6336c; margin-bottom: 15px;">
                                    ભૂદેવ નેટવર્ક ના સિદ્ધાંતો અને નીતિ-નિયમો પ્રમાણે ,  (૧) હું અને મારો પરિવાર , સામે થી આવતા દરેક ભૂદેવ નો કોલ વિનમ્રતા અને શાંતિ થી લઈશું , તેમને અમારો હા / ના , જે પણ જવાબ હોય તે સરળતા , આદરતા-પૂર્વક અને નિહ-સંકોચ થી ફોન ઉપર બોલીને કે પછી વોટ્સએપ માં લખીને (અન્ય રીતે) જણાવીશું .  (૨) કોલ કરનાર સામે વાળા ભૂદેવ નું અમે અપમાન નહીં કરીયે અને જેમ-તેમ તે ભૂદેવ ને ઉતારી નહિ પાડીયે , તેમની સાથે વ્યવસ્થિત વર્તન કરીશું . (૩) આ સાથેજ , પ્રથમ કોલ  કે મેસેજ કરનાર ભૂદેવ ની પણ તેટલીજ જવાબદારી છે કે તે કોઈ પણ પ્રકાર થી સામે વાળા પાત્ર કે પછી તેમના માતા-પિતા ને વારંવાર ફોન કરીને કે અન્ય રીતે હેરાન નહિ કરે....  જો કોઈ પણ ફેમિલી ની અમોને અમુક ઉમેદવાર-ફેમિલી માટે કમ્પ્લેન મળશે તો તેમનો બાયોડેટા રદ્દ કરવામાં આવશે અને તેમને આગામી લગ્ન-મેળા માં સ્થાન નહિ મળે . ભૂદેવ નો અર્થ છે ભૂ + દેવ , એટલે કે ધરતી પરનો દેવ , તો આપણા ગુણો પણ દેવો જેવા હોવા જોઈએ . શુભ અને શુદ્ધ વિચાર રાખવા જોઈએ , વિચાર થી વૃત્તિ બને છે , વૃત્તિ થી વાણી અને વર્તન નિર્માણ પામે છે , વાણી અને વર્તન થી વ્યક્તિત્વ બને છે અને વ્યક્તિત્વ થીજ માણસ ની ઓળખ થાય છે . I agree to Terms & Conditions of Bhudev Network organization.
                                </p>
                            {% endif %}
                            <label for="{{ field.id_for_label }}" class="form-label" style="white-space: normal; word-wrap: break-word; display: inline-block; max-width: 100%; vertical-align: top; text-indent: -1.5em; padding-left: 1.5em;">
                                {% if field.name == 'father_name' %}
                                    Father's Name
                                {% elif field.name == 'father_mobile' %}
                                    Father's WhatsappNo
                                {% elif field.name == 'mother_name' %}
                                    Mother's Name
                                {% elif field.name == 'mother_mobile' %}
                                    Mother's WhatsappNo
                                {% elif field.name == 'siblings' %}
                                    Siblings Details (Brother/Sister)
                                {% elif field.name == 'partner_education' %}
                                    Choice Of Education
                                {% elif field.name == 'partner_location' %}
                                    Choice Of Location
                                {% elif field.name == 'partner_age_bracket' %}
                                    Choice Of Age Gap/ Difference in Year
                                {% elif field.name == 'other_specific_choice' %}
                                    Any Other Choice
                                {% else %}
                                    {{ field.label }}
                                {% endif %}
                            </label>
                            {% if field.field.widget.input_type == "select" %}
                                <select id="{{ field.id_for_label }}" name="{{ field.html_name }}" class="form-control" required>
                                    <option value="" disabled selected>Select an Option</option>
                                    {% for val, text in field.field.choices %}
                                        {% if val != "" %}
                                            <option value="{{ val }}" {% if field.value == val %}selected{% endif %}>{{ text }}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            {% elif field.field.widget.input_type == "checkbox" %}
                                {{ field|add_class:"form-check-input" }}
                            {% elif field.name == "other_specific_choice" or field.name == "education_details" or field.name == "occupation_details" %}
                                {{ field|add_class:"form-control small-input" }}
                            {% else %}
                                {{ field|add_class:"form-control" }}
                            {% endif %}
                            {% if field.help_text %}
                                <div class="form-text">{{ field.help_text }}</div>
                            {% endif %}
                            {% for error in field.errors %}
                                <div class="text-danger">{{ error }}</div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    // Add serial numbers to personal details labels
                    const formContainer = document.querySelector('.form-container');
                    if (formContainer) {
                        let count = 1;
                        // Select all labels inside the form container
                        const labels = formContainer.querySelectorAll('label.form-label');
                        labels.forEach(label => {
                            label.innerHTML = '<span class="serial-number">' + count + '.</span> ' + label.innerHTML;
                            count++;
                        });
                    }

                // Disable selection of the placeholder option in all select elements
                const selects = document.querySelectorAll('select');
                selects.forEach(select => {
                    const firstOption = select.querySelector('option[value=""]');
                    if (firstOption) {
                        firstOption.disabled = true;
                    }
                });

                const maritalStatusSelect = document.getElementById('{{ form.marital_status.id_for_label }}');
                const childrenInput = document.getElementById('{{ form.children.id_for_label }}');

                function toggleChildrenInput() {
                    const disableValues = [
                        'Never Married',
                        'One Time Gol-Dhana But then Cancel',
                        'One Time Engagement (Vivah) but afterwards cancel',
                        'Divorce',
                        'Widow'
                    ];
                    if (disableValues.some(val => maritalStatusSelect.value.trim() === val.trim())) {
                        childrenInput.disabled = true;
                        childrenInput.value = '';
                    } else {
                        childrenInput.disabled = false;
                    }
                }

                maritalStatusSelect.addEventListener('change', toggleChildrenInput);
                toggleChildrenInput();

                // Allow only numeric input in children input box
                childrenInput.addEventListener('input', function(e) {
                    this.value = this.value.replace(/[^0-9]/g, '');
                });
            });
        </script>

        <button type="submit" class="btn btn-primary btn-lg mt-3">Submit</button>
    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
